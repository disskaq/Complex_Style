<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>freemodbus: Modbus</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">freemodbus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Макросы</a> &#124;
<a href="#enum-members">Перечисления</a> &#124;
<a href="#func-members">Функции</a>  </div>
  <div class="headertitle"><div class="title">Modbus</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Макросы</h2></td></tr>
<tr class="memitem:ga0e6d79d4ff38dbf7d3fd81a80d655b70" id="r_ga0e6d79d4ff38dbf7d3fd81a80d655b70"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0e6d79d4ff38dbf7d3fd81a80d655b70">MB_TCP_PORT_USE_DEFAULT</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga0e6d79d4ff38dbf7d3fd81a80d655b70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the default Modbus TCP port (502)  <br /></td></tr>
<tr class="separator:ga0e6d79d4ff38dbf7d3fd81a80d655b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Перечисления</h2></td></tr>
<tr class="memitem:ga462d0d9396f02be6f9fd5b6f19463e61" id="r_ga462d0d9396f02be6f9fd5b6f19463e61"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga462d0d9396f02be6f9fd5b6f19463e61">eMBMode</a> { <a class="el" href="#gga462d0d9396f02be6f9fd5b6f19463e61a1b807b8cf3d593d8cd8d1a1d21a3da31">MB_RTU</a>
, <a class="el" href="#gga462d0d9396f02be6f9fd5b6f19463e61afa37751530d5e48cb5a3f8841f9e3143">MB_ASCII</a>
, <a class="el" href="#gga462d0d9396f02be6f9fd5b6f19463e61a5786284fe284b4a23889bf5b444d5142">MB_TCP</a>
 }</td></tr>
<tr class="memdesc:ga462d0d9396f02be6f9fd5b6f19463e61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus serial transmission modes (RTU/ASCII).  <a href="#ga462d0d9396f02be6f9fd5b6f19463e61">Подробнее...</a><br /></td></tr>
<tr class="separator:ga462d0d9396f02be6f9fd5b6f19463e61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf1398cbbeb317b1dbd0276b275f5b0f8" id="r_gaf1398cbbeb317b1dbd0276b275f5b0f8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf1398cbbeb317b1dbd0276b275f5b0f8">eMBRegisterMode</a> { <a class="el" href="#ggaf1398cbbeb317b1dbd0276b275f5b0f8aa210c1d03e2745efb42486b822740d4b">MB_REG_READ</a>
, <a class="el" href="#ggaf1398cbbeb317b1dbd0276b275f5b0f8a3d0a62208562b69c5e7692a5a168c14e">MB_REG_WRITE</a>
 }</td></tr>
<tr class="memdesc:gaf1398cbbeb317b1dbd0276b275f5b0f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">If register should be written or read.  <a href="#gaf1398cbbeb317b1dbd0276b275f5b0f8">Подробнее...</a><br /></td></tr>
<tr class="separator:gaf1398cbbeb317b1dbd0276b275f5b0f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e7fce8c431cb0e521c67f7f36dd823d" id="r_ga9e7fce8c431cb0e521c67f7f36dd823d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a> { <br />
&#160;&#160;<a class="el" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>
, <a class="el" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf415371aad180c545b726d39adbf9ba7">MB_ENOREG</a>
, <a class="el" href="#gga9e7fce8c431cb0e521c67f7f36dd823dafa57cdb3f85e8ab4baf160579104d624">MB_EINVAL</a>
, <a class="el" href="#gga9e7fce8c431cb0e521c67f7f36dd823da539fb138411468b12c05556157c6864d">MB_EPORTERR</a>
, <br />
&#160;&#160;<a class="el" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0700c1e37bfc75068e6577bc0b04bb8">MB_ENORES</a>
, <a class="el" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf6eed4a1c490af14b7467be1e6e2fe67">MB_EIO</a>
, <a class="el" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f">MB_EILLSTATE</a>
, <a class="el" href="#gga9e7fce8c431cb0e521c67f7f36dd823da017c559e956f718cf77aafe269f49bd5">MB_ETIMEDOUT</a>
<br />
 }</td></tr>
<tr class="memdesc:ga9e7fce8c431cb0e521c67f7f36dd823d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Errorcodes used by all function in the protocol stack.  <a href="#ga9e7fce8c431cb0e521c67f7f36dd823d">Подробнее...</a><br /></td></tr>
<tr class="separator:ga9e7fce8c431cb0e521c67f7f36dd823d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16ba85fa56bcd52a11a12576af445ccb" id="r_ga16ba85fa56bcd52a11a12576af445ccb"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga16ba85fa56bcd52a11a12576af445ccb">eMBParity</a> { <a class="el" href="#gga16ba85fa56bcd52a11a12576af445ccba36c1b70b68bc05d618632e3f975a557b">MB_PAR_NONE</a>
, <a class="el" href="#gga16ba85fa56bcd52a11a12576af445ccba955fa6c30334314739ddceed6e749316">MB_PAR_ODD</a>
, <a class="el" href="#gga16ba85fa56bcd52a11a12576af445ccba0415f4c7ede57e13a0cca698a8375dbd">MB_PAR_EVEN</a>
 }</td></tr>
<tr class="memdesc:ga16ba85fa56bcd52a11a12576af445ccb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parity used for characters in serial mode.  <a href="#ga16ba85fa56bcd52a11a12576af445ccb">Подробнее...</a><br /></td></tr>
<tr class="separator:ga16ba85fa56bcd52a11a12576af445ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Функции</h2></td></tr>
<tr class="memitem:ga622dbe6b38ff1d255523d4736fa3da26" id="r_ga622dbe6b38ff1d255523d4736fa3da26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga622dbe6b38ff1d255523d4736fa3da26">eMBInit</a> (<a class="el" href="#ga462d0d9396f02be6f9fd5b6f19463e61">eMBMode</a> eMode, UCHAR ucSlaveAddress, UCHAR ucPort, ULONG ulBaudRate, <a class="el" href="#ga16ba85fa56bcd52a11a12576af445ccb">eMBParity</a> eParity)</td></tr>
<tr class="memdesc:ga622dbe6b38ff1d255523d4736fa3da26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the Modbus protocol stack.  <br /></td></tr>
<tr class="separator:ga622dbe6b38ff1d255523d4736fa3da26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab06a2d0ef8bdfd866cd934f0ec7e7a6e" id="r_gab06a2d0ef8bdfd866cd934f0ec7e7a6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab06a2d0ef8bdfd866cd934f0ec7e7a6e">eMBTCPInit</a> (USHORT usTCPPort)</td></tr>
<tr class="memdesc:gab06a2d0ef8bdfd866cd934f0ec7e7a6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the Modbus protocol stack for Modbus TCP.  <br /></td></tr>
<tr class="separator:gab06a2d0ef8bdfd866cd934f0ec7e7a6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac20080d92be2934456e2a5d27cd36310" id="r_gac20080d92be2934456e2a5d27cd36310"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac20080d92be2934456e2a5d27cd36310">eMBClose</a> (void)</td></tr>
<tr class="memdesc:gac20080d92be2934456e2a5d27cd36310"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release resources used by the protocol stack.  <br /></td></tr>
<tr class="separator:gac20080d92be2934456e2a5d27cd36310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab697be370833d562e6b016626d996132" id="r_gab697be370833d562e6b016626d996132"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab697be370833d562e6b016626d996132">eMBEnable</a> (void)</td></tr>
<tr class="memdesc:gab697be370833d562e6b016626d996132"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the Modbus protocol stack.  <br /></td></tr>
<tr class="separator:gab697be370833d562e6b016626d996132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcc2a31ec41fc276ab3c3ac705defdf3" id="r_gabcc2a31ec41fc276ab3c3ac705defdf3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabcc2a31ec41fc276ab3c3ac705defdf3">eMBDisable</a> (void)</td></tr>
<tr class="memdesc:gabcc2a31ec41fc276ab3c3ac705defdf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the Modbus protocol stack.  <br /></td></tr>
<tr class="separator:gabcc2a31ec41fc276ab3c3ac705defdf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12648c98d45f768ba878fbcee46caca5" id="r_ga12648c98d45f768ba878fbcee46caca5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga12648c98d45f768ba878fbcee46caca5">eMBPoll</a> (void)</td></tr>
<tr class="memdesc:ga12648c98d45f768ba878fbcee46caca5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main pooling loop of the Modbus protocol stack.  <br /></td></tr>
<tr class="separator:ga12648c98d45f768ba878fbcee46caca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe2b0e2dccf23d506666aa3cfdf6a8a3" id="r_gabe2b0e2dccf23d506666aa3cfdf6a8a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabe2b0e2dccf23d506666aa3cfdf6a8a3">eMBSetSlaveID</a> (UCHAR ucSlaveID, BOOL xIsRunning, UCHAR const *pucAdditional, USHORT usAdditionalLen)</td></tr>
<tr class="memdesc:gabe2b0e2dccf23d506666aa3cfdf6a8a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the slave id of the device.  <br /></td></tr>
<tr class="separator:gabe2b0e2dccf23d506666aa3cfdf6a8a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f6e66893b2388a602ac453253a00784" id="r_ga5f6e66893b2388a602ac453253a00784"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5f6e66893b2388a602ac453253a00784">eMBRegisterCB</a> (UCHAR ucFunctionCode, <a class="el" href="mbproto_8h.html#a9fe16efc84b141d9b9ec804c0ddfa4b1">pxMBFunctionHandler</a> pxHandler)</td></tr>
<tr class="memdesc:ga5f6e66893b2388a602ac453253a00784"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a callback handler for a given function code.  <br /></td></tr>
<tr class="separator:ga5f6e66893b2388a602ac453253a00784"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="mb_8h.html">mb.h</a>&quot;</span> </div>
<div class="ttc" id="amb_8h_html"><div class="ttname"><a href="mb_8h.html">mb.h</a></div></div>
</div><!-- fragment --><p>This module defines the interface for the application. It contains the basic functions and types required to use the Modbus protocol stack. A typical application will want to call <a class="el" href="#ga622dbe6b38ff1d255523d4736fa3da26" title="Initialize the Modbus protocol stack.">eMBInit()</a> first. If the device is ready to answer network requests it must then call <a class="el" href="#gab697be370833d562e6b016626d996132" title="Enable the Modbus protocol stack.">eMBEnable()</a> to activate the protocol stack. In the main loop the function <a class="el" href="#ga12648c98d45f768ba878fbcee46caca5" title="The main pooling loop of the Modbus protocol stack.">eMBPoll()</a> must be called periodically. The time interval between pooling depends on the configured Modbus timeout. If an RTOS is available a separate task should be created and the task should always call the function <a class="el" href="#ga12648c98d45f768ba878fbcee46caca5" title="The main pooling loop of the Modbus protocol stack.">eMBPoll()</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// Initialize protocol stack in RTU mode for a slave with address 10 = 0x0A</span></div>
<div class="line"><a class="code hl_function" href="#ga622dbe6b38ff1d255523d4736fa3da26">eMBInit</a>( <a class="code hl_enumvalue" href="#gga462d0d9396f02be6f9fd5b6f19463e61a1b807b8cf3d593d8cd8d1a1d21a3da31">MB_RTU</a>, 0x0A, 38400, <a class="code hl_enumvalue" href="#gga16ba85fa56bcd52a11a12576af445ccba0415f4c7ede57e13a0cca698a8375dbd">MB_PAR_EVEN</a> );</div>
<div class="line"><span class="comment">// Enable the Modbus Protocol Stack.</span></div>
<div class="line"><a class="code hl_function" href="#gab697be370833d562e6b016626d996132">eMBEnable</a>(  );</div>
<div class="line"><span class="keywordflow">for</span>( ;; )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Call the main polling loop of the Modbus protocol stack.</span></div>
<div class="line">    <a class="code hl_function" href="#ga12648c98d45f768ba878fbcee46caca5">eMBPoll</a>(  );</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="ttc" id="agroup__modbus_html_ga12648c98d45f768ba878fbcee46caca5"><div class="ttname"><a href="#ga12648c98d45f768ba878fbcee46caca5">eMBPoll</a></div><div class="ttdeci">eMBErrorCode eMBPoll(void)</div><div class="ttdoc">The main pooling loop of the Modbus protocol stack.</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00332">mb.c:332</a></div></div>
<div class="ttc" id="agroup__modbus_html_ga622dbe6b38ff1d255523d4736fa3da26"><div class="ttname"><a href="#ga622dbe6b38ff1d255523d4736fa3da26">eMBInit</a></div><div class="ttdeci">eMBErrorCode eMBInit(eMBMode eMode, UCHAR ucSlaveAddress, UCHAR ucPort, ULONG ulBaudRate, eMBParity eParity)</div><div class="ttdoc">Initialize the Modbus protocol stack.</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00130">mb.c:130</a></div></div>
<div class="ttc" id="agroup__modbus_html_gab697be370833d562e6b016626d996132"><div class="ttname"><a href="#gab697be370833d562e6b016626d996132">eMBEnable</a></div><div class="ttdeci">eMBErrorCode eMBEnable(void)</div><div class="ttdoc">Enable the Modbus protocol stack.</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00292">mb.c:292</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga16ba85fa56bcd52a11a12576af445ccba0415f4c7ede57e13a0cca698a8375dbd"><div class="ttname"><a href="#gga16ba85fa56bcd52a11a12576af445ccba0415f4c7ede57e13a0cca698a8375dbd">MB_PAR_EVEN</a></div><div class="ttdeci">@ MB_PAR_EVEN</div><div class="ttdef"><b>Definition</b> <a href="mbport_8h_source.html#l00060">mbport.h:59</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga462d0d9396f02be6f9fd5b6f19463e61a1b807b8cf3d593d8cd8d1a1d21a3da31"><div class="ttname"><a href="#gga462d0d9396f02be6f9fd5b6f19463e61a1b807b8cf3d593d8cd8d1a1d21a3da31">MB_RTU</a></div><div class="ttdeci">@ MB_RTU</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00087">mb.h:87</a></div></div>
</div><!-- fragment --> <h2 class="groupheader">Макросы</h2>
<a id="ga0e6d79d4ff38dbf7d3fd81a80d655b70" name="ga0e6d79d4ff38dbf7d3fd81a80d655b70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0e6d79d4ff38dbf7d3fd81a80d655b70">&#9670;&#160;</a></span>MB_TCP_PORT_USE_DEFAULT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MB_TCP_PORT_USE_DEFAULT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use the default Modbus TCP port (502) </p>

<p class="definition">См. определение в файле <a class="el" href="mb_8h_source.html">mb.h</a> строка <a class="el" href="mb_8h_source.html#l00074">74</a></p>

</div>
</div>
<h2 class="groupheader">Перечисления</h2>
<a id="ga9e7fce8c431cb0e521c67f7f36dd823d" name="ga9e7fce8c431cb0e521c67f7f36dd823d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9e7fce8c431cb0e521c67f7f36dd823d">&#9670;&#160;</a></span>eMBErrorCode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Errorcodes used by all function in the protocol stack. </p>
<table class="fieldtable">
<tr><th colspan="2">Элементы перечислений</th></tr><tr><td class="fieldname"><a id="gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b" name="gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b"></a>MB_ENOERR&#160;</td><td class="fielddoc"><p>no error. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga9e7fce8c431cb0e521c67f7f36dd823daf415371aad180c545b726d39adbf9ba7" name="gga9e7fce8c431cb0e521c67f7f36dd823daf415371aad180c545b726d39adbf9ba7"></a>MB_ENOREG&#160;</td><td class="fielddoc"><p>illegal register address. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga9e7fce8c431cb0e521c67f7f36dd823dafa57cdb3f85e8ab4baf160579104d624" name="gga9e7fce8c431cb0e521c67f7f36dd823dafa57cdb3f85e8ab4baf160579104d624"></a>MB_EINVAL&#160;</td><td class="fielddoc"><p>illegal argument. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga9e7fce8c431cb0e521c67f7f36dd823da539fb138411468b12c05556157c6864d" name="gga9e7fce8c431cb0e521c67f7f36dd823da539fb138411468b12c05556157c6864d"></a>MB_EPORTERR&#160;</td><td class="fielddoc"><p>porting layer error. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga9e7fce8c431cb0e521c67f7f36dd823daf0700c1e37bfc75068e6577bc0b04bb8" name="gga9e7fce8c431cb0e521c67f7f36dd823daf0700c1e37bfc75068e6577bc0b04bb8"></a>MB_ENORES&#160;</td><td class="fielddoc"><p>insufficient resources. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga9e7fce8c431cb0e521c67f7f36dd823daf6eed4a1c490af14b7467be1e6e2fe67" name="gga9e7fce8c431cb0e521c67f7f36dd823daf6eed4a1c490af14b7467be1e6e2fe67"></a>MB_EIO&#160;</td><td class="fielddoc"><p>I/O error. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f" name="gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f"></a>MB_EILLSTATE&#160;</td><td class="fielddoc"><p>protocol stack in illegal state. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga9e7fce8c431cb0e521c67f7f36dd823da017c559e956f718cf77aafe269f49bd5" name="gga9e7fce8c431cb0e521c67f7f36dd823da017c559e956f718cf77aafe269f49bd5"></a>MB_ETIMEDOUT&#160;</td><td class="fielddoc"><p>timeout error occurred. </p>
</td></tr>
</table>

<p class="definition">См. определение в файле <a class="el" href="mb_8h_source.html">mb.h</a> строка <a class="el" href="mb_8h_source.html#l00112">112</a></p>
<div class="fragment"><div class="line"><span class="lineno">  113</span>{</div>
<div class="line"><span class="lineno">  114</span>    <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>,                  </div>
<div class="line"><span class="lineno">  115</span>    <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf415371aad180c545b726d39adbf9ba7">MB_ENOREG</a>,                  </div>
<div class="line"><span class="lineno">  116</span>    <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dafa57cdb3f85e8ab4baf160579104d624">MB_EINVAL</a>,                  </div>
<div class="line"><span class="lineno">  117</span>    <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823da539fb138411468b12c05556157c6864d">MB_EPORTERR</a>,                </div>
<div class="line"><span class="lineno">  118</span>    <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0700c1e37bfc75068e6577bc0b04bb8">MB_ENORES</a>,                  </div>
<div class="line"><span class="lineno">  119</span>    <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf6eed4a1c490af14b7467be1e6e2fe67">MB_EIO</a>,                     </div>
<div class="line"><span class="lineno">  120</span>    <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f">MB_EILLSTATE</a>,               </div>
<div class="line"><span class="lineno">  121</span>    <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823da017c559e956f718cf77aafe269f49bd5">MB_ETIMEDOUT</a>                </div>
<div class="line"><span class="lineno">  122</span>} <a class="code hl_enumeration" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>;</div>
<div class="ttc" id="agroup__modbus_html_ga9e7fce8c431cb0e521c67f7f36dd823d"><div class="ttname"><a href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a></div><div class="ttdeci">eMBErrorCode</div><div class="ttdoc">Errorcodes used by all function in the protocol stack.</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00112">mb.h:113</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga9e7fce8c431cb0e521c67f7f36dd823da017c559e956f718cf77aafe269f49bd5"><div class="ttname"><a href="#gga9e7fce8c431cb0e521c67f7f36dd823da017c559e956f718cf77aafe269f49bd5">MB_ETIMEDOUT</a></div><div class="ttdeci">@ MB_ETIMEDOUT</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00122">mb.h:121</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga9e7fce8c431cb0e521c67f7f36dd823da539fb138411468b12c05556157c6864d"><div class="ttname"><a href="#gga9e7fce8c431cb0e521c67f7f36dd823da539fb138411468b12c05556157c6864d">MB_EPORTERR</a></div><div class="ttdeci">@ MB_EPORTERR</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00117">mb.h:117</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b"><div class="ttname"><a href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a></div><div class="ttdeci">@ MB_ENOERR</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00114">mb.h:114</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga9e7fce8c431cb0e521c67f7f36dd823daf0700c1e37bfc75068e6577bc0b04bb8"><div class="ttname"><a href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0700c1e37bfc75068e6577bc0b04bb8">MB_ENORES</a></div><div class="ttdeci">@ MB_ENORES</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00118">mb.h:118</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f"><div class="ttname"><a href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f">MB_EILLSTATE</a></div><div class="ttdeci">@ MB_EILLSTATE</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00120">mb.h:120</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga9e7fce8c431cb0e521c67f7f36dd823daf415371aad180c545b726d39adbf9ba7"><div class="ttname"><a href="#gga9e7fce8c431cb0e521c67f7f36dd823daf415371aad180c545b726d39adbf9ba7">MB_ENOREG</a></div><div class="ttdeci">@ MB_ENOREG</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00115">mb.h:115</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga9e7fce8c431cb0e521c67f7f36dd823daf6eed4a1c490af14b7467be1e6e2fe67"><div class="ttname"><a href="#gga9e7fce8c431cb0e521c67f7f36dd823daf6eed4a1c490af14b7467be1e6e2fe67">MB_EIO</a></div><div class="ttdeci">@ MB_EIO</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00119">mb.h:119</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga9e7fce8c431cb0e521c67f7f36dd823dafa57cdb3f85e8ab4baf160579104d624"><div class="ttname"><a href="#gga9e7fce8c431cb0e521c67f7f36dd823dafa57cdb3f85e8ab4baf160579104d624">MB_EINVAL</a></div><div class="ttdeci">@ MB_EINVAL</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00116">mb.h:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga462d0d9396f02be6f9fd5b6f19463e61" name="ga462d0d9396f02be6f9fd5b6f19463e61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga462d0d9396f02be6f9fd5b6f19463e61">&#9670;&#160;</a></span>eMBMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga462d0d9396f02be6f9fd5b6f19463e61">eMBMode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modbus serial transmission modes (RTU/ASCII). </p>
<p>Modbus serial supports two transmission modes. Either ASCII or RTU. RTU is faster but has more hardware requirements and requires a network with a low jitter. ASCII is slower and more reliable on slower links (E.g. modems) </p>
<table class="fieldtable">
<tr><th colspan="2">Элементы перечислений</th></tr><tr><td class="fieldname"><a id="gga462d0d9396f02be6f9fd5b6f19463e61a1b807b8cf3d593d8cd8d1a1d21a3da31" name="gga462d0d9396f02be6f9fd5b6f19463e61a1b807b8cf3d593d8cd8d1a1d21a3da31"></a>MB_RTU&#160;</td><td class="fielddoc"><p>RTU transmission mode. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga462d0d9396f02be6f9fd5b6f19463e61afa37751530d5e48cb5a3f8841f9e3143" name="gga462d0d9396f02be6f9fd5b6f19463e61afa37751530d5e48cb5a3f8841f9e3143"></a>MB_ASCII&#160;</td><td class="fielddoc"><p>ASCII transmission mode. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga462d0d9396f02be6f9fd5b6f19463e61a5786284fe284b4a23889bf5b444d5142" name="gga462d0d9396f02be6f9fd5b6f19463e61a5786284fe284b4a23889bf5b444d5142"></a>MB_TCP&#160;</td><td class="fielddoc"><p>TCP mode. </p>
</td></tr>
</table>

<p class="definition">См. определение в файле <a class="el" href="mb_8h_source.html">mb.h</a> строка <a class="el" href="mb_8h_source.html#l00085">85</a></p>
<div class="fragment"><div class="line"><span class="lineno">   86</span>{</div>
<div class="line"><span class="lineno">   87</span>    <a class="code hl_enumvalue" href="#gga462d0d9396f02be6f9fd5b6f19463e61a1b807b8cf3d593d8cd8d1a1d21a3da31">MB_RTU</a>,                     </div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_enumvalue" href="#gga462d0d9396f02be6f9fd5b6f19463e61afa37751530d5e48cb5a3f8841f9e3143">MB_ASCII</a>,                   </div>
<div class="line"><span class="lineno">   89</span>    <a class="code hl_enumvalue" href="#gga462d0d9396f02be6f9fd5b6f19463e61a5786284fe284b4a23889bf5b444d5142">MB_TCP</a>                      </div>
<div class="line"><span class="lineno">   90</span>} <a class="code hl_enumeration" href="#ga462d0d9396f02be6f9fd5b6f19463e61">eMBMode</a>;</div>
<div class="ttc" id="agroup__modbus_html_ga462d0d9396f02be6f9fd5b6f19463e61"><div class="ttname"><a href="#ga462d0d9396f02be6f9fd5b6f19463e61">eMBMode</a></div><div class="ttdeci">eMBMode</div><div class="ttdoc">Modbus serial transmission modes (RTU/ASCII).</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00085">mb.h:86</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga462d0d9396f02be6f9fd5b6f19463e61a5786284fe284b4a23889bf5b444d5142"><div class="ttname"><a href="#gga462d0d9396f02be6f9fd5b6f19463e61a5786284fe284b4a23889bf5b444d5142">MB_TCP</a></div><div class="ttdeci">@ MB_TCP</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00090">mb.h:89</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga462d0d9396f02be6f9fd5b6f19463e61afa37751530d5e48cb5a3f8841f9e3143"><div class="ttname"><a href="#gga462d0d9396f02be6f9fd5b6f19463e61afa37751530d5e48cb5a3f8841f9e3143">MB_ASCII</a></div><div class="ttdeci">@ MB_ASCII</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00088">mb.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga16ba85fa56bcd52a11a12576af445ccb" name="ga16ba85fa56bcd52a11a12576af445ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16ba85fa56bcd52a11a12576af445ccb">&#9670;&#160;</a></span>eMBParity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga16ba85fa56bcd52a11a12576af445ccb">eMBParity</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parity used for characters in serial mode. </p>
<p>The parity which should be applied to the characters sent over the serial link. Please note that this values are actually passed to the porting layer and therefore not all parity modes might be available. </p>
<table class="fieldtable">
<tr><th colspan="2">Элементы перечислений</th></tr><tr><td class="fieldname"><a id="gga16ba85fa56bcd52a11a12576af445ccba36c1b70b68bc05d618632e3f975a557b" name="gga16ba85fa56bcd52a11a12576af445ccba36c1b70b68bc05d618632e3f975a557b"></a>MB_PAR_NONE&#160;</td><td class="fielddoc"><p>No parity. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga16ba85fa56bcd52a11a12576af445ccba955fa6c30334314739ddceed6e749316" name="gga16ba85fa56bcd52a11a12576af445ccba955fa6c30334314739ddceed6e749316"></a>MB_PAR_ODD&#160;</td><td class="fielddoc"><p>Odd parity. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga16ba85fa56bcd52a11a12576af445ccba0415f4c7ede57e13a0cca698a8375dbd" name="gga16ba85fa56bcd52a11a12576af445ccba0415f4c7ede57e13a0cca698a8375dbd"></a>MB_PAR_EVEN&#160;</td><td class="fielddoc"><p>Even parity. </p>
</td></tr>
</table>

<p class="definition">См. определение в файле <a class="el" href="mbport_8h_source.html">mbport.h</a> строка <a class="el" href="mbport_8h_source.html#l00055">55</a></p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{</div>
<div class="line"><span class="lineno">   57</span>    <a class="code hl_enumvalue" href="#gga16ba85fa56bcd52a11a12576af445ccba36c1b70b68bc05d618632e3f975a557b">MB_PAR_NONE</a>,                </div>
<div class="line"><span class="lineno">   58</span>    <a class="code hl_enumvalue" href="#gga16ba85fa56bcd52a11a12576af445ccba955fa6c30334314739ddceed6e749316">MB_PAR_ODD</a>,                 </div>
<div class="line"><span class="lineno">   59</span>    <a class="code hl_enumvalue" href="#gga16ba85fa56bcd52a11a12576af445ccba0415f4c7ede57e13a0cca698a8375dbd">MB_PAR_EVEN</a>                 </div>
<div class="line"><span class="lineno">   60</span>} <a class="code hl_enumeration" href="#ga16ba85fa56bcd52a11a12576af445ccb">eMBParity</a>;</div>
<div class="ttc" id="agroup__modbus_html_ga16ba85fa56bcd52a11a12576af445ccb"><div class="ttname"><a href="#ga16ba85fa56bcd52a11a12576af445ccb">eMBParity</a></div><div class="ttdeci">eMBParity</div><div class="ttdoc">Parity used for characters in serial mode.</div><div class="ttdef"><b>Definition</b> <a href="mbport_8h_source.html#l00055">mbport.h:56</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga16ba85fa56bcd52a11a12576af445ccba36c1b70b68bc05d618632e3f975a557b"><div class="ttname"><a href="#gga16ba85fa56bcd52a11a12576af445ccba36c1b70b68bc05d618632e3f975a557b">MB_PAR_NONE</a></div><div class="ttdeci">@ MB_PAR_NONE</div><div class="ttdef"><b>Definition</b> <a href="mbport_8h_source.html#l00057">mbport.h:57</a></div></div>
<div class="ttc" id="agroup__modbus_html_gga16ba85fa56bcd52a11a12576af445ccba955fa6c30334314739ddceed6e749316"><div class="ttname"><a href="#gga16ba85fa56bcd52a11a12576af445ccba955fa6c30334314739ddceed6e749316">MB_PAR_ODD</a></div><div class="ttdeci">@ MB_PAR_ODD</div><div class="ttdef"><b>Definition</b> <a href="mbport_8h_source.html#l00058">mbport.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaf1398cbbeb317b1dbd0276b275f5b0f8" name="gaf1398cbbeb317b1dbd0276b275f5b0f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf1398cbbeb317b1dbd0276b275f5b0f8">&#9670;&#160;</a></span>eMBRegisterMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gaf1398cbbeb317b1dbd0276b275f5b0f8">eMBRegisterMode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If register should be written or read. </p>
<p>This value is passed to the callback functions which support either reading or writing register values. Writing means that the application registers should be updated and reading means that the modbus protocol stack needs to know the current register values.</p>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="group__modbus__registers.html#ga10d37e1d80224bf3b1eeb9e246d7582e" title="Callback function used if a Holding Register value is read or written by the protocol stack....">eMBRegHoldingCB( )</a>, <a class="el" href="group__modbus__registers.html#ga88d9b719291515c60eee1bf9ffa1dd02" title="Callback function used if a Coil Register value is read or written by the protocol stack....">eMBRegCoilsCB( )</a>, <a class="el" href="group__modbus__registers.html#ga38101f5da54af137e210a3b8b9fa3887" title="Callback function used if a Input Discrete Register value is read by the protocol stack.">eMBRegDiscreteCB( )</a> and <a class="el" href="group__modbus__registers.html#ga7816677520b1eb2ebecf15060a41bc81" title="Callback function used if the value of a Input Register is required by the protocol stack....">eMBRegInputCB( )</a>. </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Элементы перечислений</th></tr><tr><td class="fieldname"><a id="ggaf1398cbbeb317b1dbd0276b275f5b0f8aa210c1d03e2745efb42486b822740d4b" name="ggaf1398cbbeb317b1dbd0276b275f5b0f8aa210c1d03e2745efb42486b822740d4b"></a>MB_REG_READ&#160;</td><td class="fielddoc"><p>Read register values and pass to protocol stack. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf1398cbbeb317b1dbd0276b275f5b0f8a3d0a62208562b69c5e7692a5a168c14e" name="ggaf1398cbbeb317b1dbd0276b275f5b0f8a3d0a62208562b69c5e7692a5a168c14e"></a>MB_REG_WRITE&#160;</td><td class="fielddoc"><p>Update register values. </p>
</td></tr>
</table>

<p class="definition">См. определение в файле <a class="el" href="mb_8h_source.html">mb.h</a> строка <a class="el" href="mb_8h_source.html#l00103">103</a></p>
<div class="fragment"><div class="line"><span class="lineno">  104</span>{</div>
<div class="line"><span class="lineno">  105</span>    <a class="code hl_enumvalue" href="#ggaf1398cbbeb317b1dbd0276b275f5b0f8aa210c1d03e2745efb42486b822740d4b">MB_REG_READ</a>,                </div>
<div class="line"><span class="lineno">  106</span>    <a class="code hl_enumvalue" href="#ggaf1398cbbeb317b1dbd0276b275f5b0f8a3d0a62208562b69c5e7692a5a168c14e">MB_REG_WRITE</a>                </div>
<div class="line"><span class="lineno">  107</span>} <a class="code hl_enumeration" href="#gaf1398cbbeb317b1dbd0276b275f5b0f8">eMBRegisterMode</a>;</div>
<div class="ttc" id="agroup__modbus_html_gaf1398cbbeb317b1dbd0276b275f5b0f8"><div class="ttname"><a href="#gaf1398cbbeb317b1dbd0276b275f5b0f8">eMBRegisterMode</a></div><div class="ttdeci">eMBRegisterMode</div><div class="ttdoc">If register should be written or read.</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00103">mb.h:104</a></div></div>
<div class="ttc" id="agroup__modbus_html_ggaf1398cbbeb317b1dbd0276b275f5b0f8a3d0a62208562b69c5e7692a5a168c14e"><div class="ttname"><a href="#ggaf1398cbbeb317b1dbd0276b275f5b0f8a3d0a62208562b69c5e7692a5a168c14e">MB_REG_WRITE</a></div><div class="ttdeci">@ MB_REG_WRITE</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00107">mb.h:106</a></div></div>
<div class="ttc" id="agroup__modbus_html_ggaf1398cbbeb317b1dbd0276b275f5b0f8aa210c1d03e2745efb42486b822740d4b"><div class="ttname"><a href="#ggaf1398cbbeb317b1dbd0276b275f5b0f8aa210c1d03e2745efb42486b822740d4b">MB_REG_READ</a></div><div class="ttdeci">@ MB_REG_READ</div><div class="ttdef"><b>Definition</b> <a href="mb_8h_source.html#l00105">mb.h:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Функции</h2>
<a id="gac20080d92be2934456e2a5d27cd36310" name="gac20080d92be2934456e2a5d27cd36310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac20080d92be2934456e2a5d27cd36310">&#9670;&#160;</a></span>eMBClose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a> eMBClose </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release resources used by the protocol stack. </p>
<p>This function disables the Modbus protocol stack and release all hardware resources. It must only be called when the protocol stack is disabled.</p>
<dl class="section note"><dt>Заметки</dt><dd>Note all ports implement this function. A port which wants to get an callback must define the macro MB_PORT_HAS_CLOSE to 1.</dd></dl>
<dl class="section return"><dt>Возвращает</dt><dd>If the resources where released it return eMBErrorCode::MB_ENOERR. If the protocol stack is not in the disabled state it returns eMBErrorCode::MB_EILLSTATE. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="mb_8c_source.html">mb.c</a> строка <a class="el" href="mb_8c_source.html#l00273">273</a></p>
<div class="fragment"><div class="line"><span class="lineno">  274</span>{</div>
<div class="line"><span class="lineno">  275</span>    <a class="code hl_enumeration" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>    eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>;</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="mb_8c.html#a1ccc6954ab86e45b13f3c0536fd66315">eMBState</a> == <a class="code hl_enumvalue" href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55bad2199361daff83037e3f6aaccaa5a91b">STATE_DISABLED</a> )</div>
<div class="line"><span class="lineno">  278</span>    {</div>
<div class="line"><span class="lineno">  279</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="mb_8c.html#aef5110f3d47305125c738986dbe85e0d">pvMBFrameCloseCur</a> != NULL )</div>
<div class="line"><span class="lineno">  280</span>        {</div>
<div class="line"><span class="lineno">  281</span>            <a class="code hl_variable" href="mb_8c.html#aef5110f3d47305125c738986dbe85e0d">pvMBFrameCloseCur</a>(  );</div>
<div class="line"><span class="lineno">  282</span>        }</div>
<div class="line"><span class="lineno">  283</span>    }</div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  285</span>    {</div>
<div class="line"><span class="lineno">  286</span>        eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f">MB_EILLSTATE</a>;</div>
<div class="line"><span class="lineno">  287</span>    }</div>
<div class="line"><span class="lineno">  288</span>    <span class="keywordflow">return</span> eStatus;</div>
<div class="line"><span class="lineno">  289</span>}</div>
<div class="ttc" id="amb_8c_html_a06fc87d81c62e9abb8790b6e5713c55bad2199361daff83037e3f6aaccaa5a91b"><div class="ttname"><a href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55bad2199361daff83037e3f6aaccaa5a91b">STATE_DISABLED</a></div><div class="ttdeci">@ STATE_DISABLED</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00068">mb.c:68</a></div></div>
<div class="ttc" id="amb_8c_html_a1ccc6954ab86e45b13f3c0536fd66315"><div class="ttname"><a href="mb_8c.html#a1ccc6954ab86e45b13f3c0536fd66315">eMBState</a></div><div class="ttdeci">static enum @0 eMBState</div></div>
<div class="ttc" id="amb_8c_html_aef5110f3d47305125c738986dbe85e0d"><div class="ttname"><a href="mb_8c.html#aef5110f3d47305125c738986dbe85e0d">pvMBFrameCloseCur</a></div><div class="ttdeci">static pvMBFrameClose pvMBFrameCloseCur</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00079">mb.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gabcc2a31ec41fc276ab3c3ac705defdf3" name="gabcc2a31ec41fc276ab3c3ac705defdf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabcc2a31ec41fc276ab3c3ac705defdf3">&#9670;&#160;</a></span>eMBDisable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a> eMBDisable </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the Modbus protocol stack. </p>
<p>This function disables processing of Modbus frames.</p>
<dl class="section return"><dt>Возвращает</dt><dd>If the protocol stack has been disabled it returns eMBErrorCode::MB_ENOERR. If it was not in the enabled state it returns eMBErrorCode::MB_EILLSTATE. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="mb_8c_source.html">mb.c</a> строка <a class="el" href="mb_8c_source.html#l00310">310</a></p>
<div class="fragment"><div class="line"><span class="lineno">  311</span>{</div>
<div class="line"><span class="lineno">  312</span>    <a class="code hl_enumeration" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>    eStatus;</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="mb_8c.html#a1ccc6954ab86e45b13f3c0536fd66315">eMBState</a> == <a class="code hl_enumvalue" href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba94a5ceac60e29b414570d8fec5d459ca">STATE_ENABLED</a> )</div>
<div class="line"><span class="lineno">  315</span>    {</div>
<div class="line"><span class="lineno">  316</span>        <a class="code hl_variable" href="mb_8c.html#a043a961601eba48ca372b99f5c67ec3c">pvMBFrameStopCur</a>(  );</div>
<div class="line"><span class="lineno">  317</span>        <a class="code hl_variable" href="mb_8c.html#a1ccc6954ab86e45b13f3c0536fd66315">eMBState</a> = <a class="code hl_enumvalue" href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55bad2199361daff83037e3f6aaccaa5a91b">STATE_DISABLED</a>;</div>
<div class="line"><span class="lineno">  318</span>        eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>;</div>
<div class="line"><span class="lineno">  319</span>    }</div>
<div class="line"><span class="lineno">  320</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="mb_8c.html#a1ccc6954ab86e45b13f3c0536fd66315">eMBState</a> == <a class="code hl_enumvalue" href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55bad2199361daff83037e3f6aaccaa5a91b">STATE_DISABLED</a> )</div>
<div class="line"><span class="lineno">  321</span>    {</div>
<div class="line"><span class="lineno">  322</span>        eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>;</div>
<div class="line"><span class="lineno">  323</span>    }</div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  325</span>    {</div>
<div class="line"><span class="lineno">  326</span>        eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f">MB_EILLSTATE</a>;</div>
<div class="line"><span class="lineno">  327</span>    }</div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">return</span> eStatus;</div>
<div class="line"><span class="lineno">  329</span>}</div>
<div class="ttc" id="amb_8c_html_a043a961601eba48ca372b99f5c67ec3c"><div class="ttname"><a href="mb_8c.html#a043a961601eba48ca372b99f5c67ec3c">pvMBFrameStopCur</a></div><div class="ttdeci">static pvMBFrameStop pvMBFrameStopCur</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00077">mb.c:77</a></div></div>
<div class="ttc" id="amb_8c_html_a06fc87d81c62e9abb8790b6e5713c55ba94a5ceac60e29b414570d8fec5d459ca"><div class="ttname"><a href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba94a5ceac60e29b414570d8fec5d459ca">STATE_ENABLED</a></div><div class="ttdeci">@ STATE_ENABLED</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00067">mb.c:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gab697be370833d562e6b016626d996132" name="gab697be370833d562e6b016626d996132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab697be370833d562e6b016626d996132">&#9670;&#160;</a></span>eMBEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a> eMBEnable </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the Modbus protocol stack. </p>
<p>This function enables processing of Modbus frames. Enabling the protocol stack is only possible if it is in the disabled state.</p>
<dl class="section return"><dt>Возвращает</dt><dd>If the protocol stack is now in the state enabled it returns eMBErrorCode::MB_ENOERR. If it was not in the disabled state it return eMBErrorCode::MB_EILLSTATE. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="mb_8c_source.html">mb.c</a> строка <a class="el" href="mb_8c_source.html#l00292">292</a></p>
<div class="fragment"><div class="line"><span class="lineno">  293</span>{</div>
<div class="line"><span class="lineno">  294</span>    <a class="code hl_enumeration" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>    eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>;</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="mb_8c.html#a1ccc6954ab86e45b13f3c0536fd66315">eMBState</a> == <a class="code hl_enumvalue" href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55bad2199361daff83037e3f6aaccaa5a91b">STATE_DISABLED</a> )</div>
<div class="line"><span class="lineno">  297</span>    {</div>
<div class="line"><span class="lineno">  298</span>        <span class="comment">/* Activate the protocol stack. */</span></div>
<div class="line"><span class="lineno">  299</span>        <a class="code hl_variable" href="mb_8c.html#ae5cc9150f4c154d4c4983fa551b0c2c1">pvMBFrameStartCur</a>(  );</div>
<div class="line"><span class="lineno">  300</span>        <a class="code hl_variable" href="mb_8c.html#a1ccc6954ab86e45b13f3c0536fd66315">eMBState</a> = <a class="code hl_enumvalue" href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba94a5ceac60e29b414570d8fec5d459ca">STATE_ENABLED</a>;</div>
<div class="line"><span class="lineno">  301</span>    }</div>
<div class="line"><span class="lineno">  302</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  303</span>    {</div>
<div class="line"><span class="lineno">  304</span>        eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f">MB_EILLSTATE</a>;</div>
<div class="line"><span class="lineno">  305</span>    }</div>
<div class="line"><span class="lineno">  306</span>    <span class="keywordflow">return</span> eStatus;</div>
<div class="line"><span class="lineno">  307</span>}</div>
<div class="ttc" id="amb_8c_html_ae5cc9150f4c154d4c4983fa551b0c2c1"><div class="ttname"><a href="mb_8c.html#ae5cc9150f4c154d4c4983fa551b0c2c1">pvMBFrameStartCur</a></div><div class="ttdeci">static pvMBFrameStart pvMBFrameStartCur</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00076">mb.c:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga622dbe6b38ff1d255523d4736fa3da26" name="ga622dbe6b38ff1d255523d4736fa3da26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga622dbe6b38ff1d255523d4736fa3da26">&#9670;&#160;</a></span>eMBInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a> eMBInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ga462d0d9396f02be6f9fd5b6f19463e61">eMBMode</a></td>          <td class="paramname"><span class="paramname"><em>eMode</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UCHAR</td>          <td class="paramname"><span class="paramname"><em>ucSlaveAddress</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UCHAR</td>          <td class="paramname"><span class="paramname"><em>ucPort</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ULONG</td>          <td class="paramname"><span class="paramname"><em>ulBaudRate</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga16ba85fa56bcd52a11a12576af445ccb">eMBParity</a></td>          <td class="paramname"><span class="paramname"><em>eParity</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the Modbus protocol stack. </p>
<p>This functions initializes the ASCII or RTU module and calls the init functions of the porting layer to prepare the hardware. Please note that the receiver is still disabled and no Modbus frames are processed until <a class="el" href="#gab697be370833d562e6b016626d996132" title="Enable the Modbus protocol stack.">eMBEnable( )</a> has been called.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">eMode</td><td>If ASCII or RTU mode should be used. </td></tr>
    <tr><td class="paramname">ucSlaveAddress</td><td>The slave address. Only frames sent to this address or to the broadcast address are processed. </td></tr>
    <tr><td class="paramname">ucPort</td><td>The port to use. E.g. 1 for COM1 on windows. This value is platform dependent and some ports simply choose to ignore it. </td></tr>
    <tr><td class="paramname">ulBaudRate</td><td>The baudrate. E.g. 19200. Supported baudrates depend on the porting layer. </td></tr>
    <tr><td class="paramname">eParity</td><td>Parity used for serial transmission.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>If no error occurs the function returns eMBErrorCode::MB_ENOERR. The protocol is then in the disabled state and ready for activation by calling <a class="el" href="#gab697be370833d562e6b016626d996132" title="Enable the Modbus protocol stack.">eMBEnable( )</a>. Otherwise one of the following error codes is returned:<ul>
<li>eMBErrorCode::MB_EINVAL If the slave address was not valid. Valid slave addresses are in the range 1 - 247.</li>
<li>eMBErrorCode::MB_EPORTERR IF the porting layer returned an error. </li>
</ul>
</dd></dl>

<p class="definition">См. определение в файле <a class="el" href="mb_8c_source.html">mb.c</a> строка <a class="el" href="mb_8c_source.html#l00130">130</a></p>
<div class="fragment"><div class="line"><span class="lineno">  131</span>{</div>
<div class="line"><span class="lineno">  132</span>    <a class="code hl_enumeration" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>    eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>;</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>    <span class="comment">/* check preconditions */</span></div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">if</span>( ( ucSlaveAddress == <a class="code hl_define" href="mbproto_8h.html#a5e80f256fa3cb8a969c9935b48f2a7b1">MB_ADDRESS_BROADCAST</a> ) ||</div>
<div class="line"><span class="lineno">  136</span>        ( ucSlaveAddress &lt; <a class="code hl_define" href="mbproto_8h.html#accf024291f4458ad8ad33e32568e8561">MB_ADDRESS_MIN</a> ) || ( ucSlaveAddress &gt; <a class="code hl_define" href="mbproto_8h.html#a8b915be3e09043b5da9d307d30efd9f7">MB_ADDRESS_MAX</a> ) )</div>
<div class="line"><span class="lineno">  137</span>    {</div>
<div class="line"><span class="lineno">  138</span>        eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dafa57cdb3f85e8ab4baf160579104d624">MB_EINVAL</a>;</div>
<div class="line"><span class="lineno">  139</span>    }</div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  141</span>    {</div>
<div class="line"><span class="lineno">  142</span>        <a class="code hl_variable" href="mb_8c.html#a49d81a2027be5b1914a9aca31bb1a9ae">ucMBAddress</a> = ucSlaveAddress;</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>        <span class="keywordflow">switch</span> ( eMode )</div>
<div class="line"><span class="lineno">  145</span>        {</div>
<div class="line"><span class="lineno">  146</span><span class="preprocessor">#if MB_RTU_ENABLED &gt; 0</span></div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="#gga462d0d9396f02be6f9fd5b6f19463e61a1b807b8cf3d593d8cd8d1a1d21a3da31">MB_RTU</a>:</div>
<div class="line"><span class="lineno">  148</span>            <a class="code hl_variable" href="mb_8c.html#ae5cc9150f4c154d4c4983fa551b0c2c1">pvMBFrameStartCur</a> = <a class="code hl_function" href="mbrtu_8c.html#ae342bae030ea291a6e8a2fe3d2d0abeb">eMBRTUStart</a>;</div>
<div class="line"><span class="lineno">  149</span>            <a class="code hl_variable" href="mb_8c.html#a043a961601eba48ca372b99f5c67ec3c">pvMBFrameStopCur</a> = <a class="code hl_function" href="mbrtu_8c.html#a3d44ef4747b7202d37142ef1aaea493b">eMBRTUStop</a>;</div>
<div class="line"><span class="lineno">  150</span>            <a class="code hl_variable" href="mb_8c.html#ae9daf4765e9a354a64f171108ace3094">peMBFrameSendCur</a> = <a class="code hl_function" href="mbrtu_8c.html#a6feb0c70f52d3ef74da1cfbdc10d1ab0">eMBRTUSend</a>;</div>
<div class="line"><span class="lineno">  151</span>            <a class="code hl_variable" href="mb_8c.html#a9e7657161e4e14b266f0f20d3ad8eda5">peMBFrameReceiveCur</a> = <a class="code hl_function" href="mbrtu_8c.html#a669fd79aadbd1cc49ac4f11382dc15d9">eMBRTUReceive</a>;</div>
<div class="line"><span class="lineno">  152</span>            <a class="code hl_variable" href="mb_8c.html#aef5110f3d47305125c738986dbe85e0d">pvMBFrameCloseCur</a> = <a class="code hl_define" href="mb_8c.html#a63c1fbefc04d96d29ef84407e22c4e3e">MB_PORT_HAS_CLOSE</a> ? <a class="code hl_function" href="mbport_8h.html#ae97991ffb6ce01584afce5dd4f653b41">vMBPortClose</a> : NULL;</div>
<div class="line"><span class="lineno">  153</span>            <a class="code hl_variable" href="mb_8c.html#a6ff9d563210c04e3afb414b9db75154a">pxMBFrameCBByteReceived</a> = <a class="code hl_function" href="mbrtu_8c.html#a447f45f582daab2600cad612b00120b0">xMBRTUReceiveFSM</a>;</div>
<div class="line"><span class="lineno">  154</span>            <a class="code hl_variable" href="mb_8c.html#a46ac9d979eaaeb885415014a0cb350b2">pxMBFrameCBTransmitterEmpty</a> = <a class="code hl_function" href="mbrtu_8c.html#a663e5daf0be0f2426a72c531c91d423f">xMBRTUTransmitFSM</a>;</div>
<div class="line"><span class="lineno">  155</span>            <a class="code hl_variable" href="mb_8c.html#a3ca010d1cf1b3bda066f0d65641d9055">pxMBPortCBTimerExpired</a> = <a class="code hl_function" href="mbrtu_8c.html#ac6302a8b67c6b82ae49e6c9d6a9795da">xMBRTUTimerT35Expired</a>;</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>            eStatus = <a class="code hl_function" href="mbrtu_8c.html#a52738b46d7f3be581582d30cfb2bfcb8">eMBRTUInit</a>( <a class="code hl_variable" href="mb_8c.html#a49d81a2027be5b1914a9aca31bb1a9ae">ucMBAddress</a>, ucPort, ulBaudRate, eParity );</div>
<div class="line"><span class="lineno">  158</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  159</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  160</span><span class="preprocessor">#if MB_ASCII_ENABLED &gt; 0</span></div>
<div class="line"><span class="lineno">  161</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="#gga462d0d9396f02be6f9fd5b6f19463e61afa37751530d5e48cb5a3f8841f9e3143">MB_ASCII</a>:</div>
<div class="line"><span class="lineno">  162</span>            <a class="code hl_variable" href="mb_8c.html#ae5cc9150f4c154d4c4983fa551b0c2c1">pvMBFrameStartCur</a> = eMBASCIIStart;</div>
<div class="line"><span class="lineno">  163</span>            <a class="code hl_variable" href="mb_8c.html#a043a961601eba48ca372b99f5c67ec3c">pvMBFrameStopCur</a> = eMBASCIIStop;</div>
<div class="line"><span class="lineno">  164</span>            <a class="code hl_variable" href="mb_8c.html#ae9daf4765e9a354a64f171108ace3094">peMBFrameSendCur</a> = eMBASCIISend;</div>
<div class="line"><span class="lineno">  165</span>            <a class="code hl_variable" href="mb_8c.html#a9e7657161e4e14b266f0f20d3ad8eda5">peMBFrameReceiveCur</a> = eMBASCIIReceive;</div>
<div class="line"><span class="lineno">  166</span>            <a class="code hl_variable" href="mb_8c.html#aef5110f3d47305125c738986dbe85e0d">pvMBFrameCloseCur</a> = <a class="code hl_define" href="mb_8c.html#a63c1fbefc04d96d29ef84407e22c4e3e">MB_PORT_HAS_CLOSE</a> ? <a class="code hl_function" href="mbport_8h.html#ae97991ffb6ce01584afce5dd4f653b41">vMBPortClose</a> : NULL;</div>
<div class="line"><span class="lineno">  167</span>            <a class="code hl_variable" href="mb_8c.html#a6ff9d563210c04e3afb414b9db75154a">pxMBFrameCBByteReceived</a> = xMBASCIIReceiveFSM;</div>
<div class="line"><span class="lineno">  168</span>            <a class="code hl_variable" href="mb_8c.html#a46ac9d979eaaeb885415014a0cb350b2">pxMBFrameCBTransmitterEmpty</a> = xMBASCIITransmitFSM;</div>
<div class="line"><span class="lineno">  169</span>            <a class="code hl_variable" href="mb_8c.html#a3ca010d1cf1b3bda066f0d65641d9055">pxMBPortCBTimerExpired</a> = xMBASCIITimerT1SExpired;</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>            eStatus = eMBASCIIInit( <a class="code hl_variable" href="mb_8c.html#a49d81a2027be5b1914a9aca31bb1a9ae">ucMBAddress</a>, ucPort, ulBaudRate, eParity );</div>
<div class="line"><span class="lineno">  172</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  173</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  175</span>            eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dafa57cdb3f85e8ab4baf160579104d624">MB_EINVAL</a>;</div>
<div class="line"><span class="lineno">  176</span>        }</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordflow">if</span>( eStatus == <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a> )</div>
<div class="line"><span class="lineno">  179</span>        {</div>
<div class="line"><span class="lineno">  180</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="mbport_8h.html#a23aa6afd41597f7aaf5d1a6e6831c718">xMBPortEventInit</a>(  ) )</div>
<div class="line"><span class="lineno">  181</span>            {</div>
<div class="line"><span class="lineno">  182</span>                <span class="comment">/* port dependent event module initalization failed. */</span></div>
<div class="line"><span class="lineno">  183</span>                eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823da539fb138411468b12c05556157c6864d">MB_EPORTERR</a>;</div>
<div class="line"><span class="lineno">  184</span>            }</div>
<div class="line"><span class="lineno">  185</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  186</span>            {</div>
<div class="line"><span class="lineno">  187</span>                <a class="code hl_variable" href="mb_8c.html#a288653bd38728bea3b3c705f25d87483">eMBCurrentMode</a> = eMode;</div>
<div class="line"><span class="lineno">  188</span>                <a class="code hl_variable" href="mb_8c.html#a1ccc6954ab86e45b13f3c0536fd66315">eMBState</a> = <a class="code hl_enumvalue" href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55bad2199361daff83037e3f6aaccaa5a91b">STATE_DISABLED</a>;</div>
<div class="line"><span class="lineno">  189</span>            }</div>
<div class="line"><span class="lineno">  190</span>        }</div>
<div class="line"><span class="lineno">  191</span>    }</div>
<div class="line"><span class="lineno">  192</span>    <span class="keywordflow">return</span> eStatus;</div>
<div class="line"><span class="lineno">  193</span>}</div>
<div class="ttc" id="amb_8c_html_a288653bd38728bea3b3c705f25d87483"><div class="ttname"><a href="mb_8c.html#a288653bd38728bea3b3c705f25d87483">eMBCurrentMode</a></div><div class="ttdeci">static eMBMode eMBCurrentMode</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00063">mb.c:63</a></div></div>
<div class="ttc" id="amb_8c_html_a3ca010d1cf1b3bda066f0d65641d9055"><div class="ttname"><a href="mb_8c.html#a3ca010d1cf1b3bda066f0d65641d9055">pxMBPortCBTimerExpired</a></div><div class="ttdeci">BOOL(* pxMBPortCBTimerExpired)(void)</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00087">mb.c:87</a></div></div>
<div class="ttc" id="amb_8c_html_a46ac9d979eaaeb885415014a0cb350b2"><div class="ttname"><a href="mb_8c.html#a46ac9d979eaaeb885415014a0cb350b2">pxMBFrameCBTransmitterEmpty</a></div><div class="ttdeci">BOOL(* pxMBFrameCBTransmitterEmpty)(void)</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00086">mb.c:86</a></div></div>
<div class="ttc" id="amb_8c_html_a49d81a2027be5b1914a9aca31bb1a9ae"><div class="ttname"><a href="mb_8c.html#a49d81a2027be5b1914a9aca31bb1a9ae">ucMBAddress</a></div><div class="ttdeci">static UCHAR ucMBAddress</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00062">mb.c:62</a></div></div>
<div class="ttc" id="amb_8c_html_a63c1fbefc04d96d29ef84407e22c4e3e"><div class="ttname"><a href="mb_8c.html#a63c1fbefc04d96d29ef84407e22c4e3e">MB_PORT_HAS_CLOSE</a></div><div class="ttdeci">#define MB_PORT_HAS_CLOSE</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00057">mb.c:57</a></div></div>
<div class="ttc" id="amb_8c_html_a6ff9d563210c04e3afb414b9db75154a"><div class="ttname"><a href="mb_8c.html#a6ff9d563210c04e3afb414b9db75154a">pxMBFrameCBByteReceived</a></div><div class="ttdeci">BOOL(* pxMBFrameCBByteReceived)(void)</div><div class="ttdoc">Callback function for the porting layer when a new byte is available.</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00085">mb.c:85</a></div></div>
<div class="ttc" id="amb_8c_html_a9e7657161e4e14b266f0f20d3ad8eda5"><div class="ttname"><a href="mb_8c.html#a9e7657161e4e14b266f0f20d3ad8eda5">peMBFrameReceiveCur</a></div><div class="ttdeci">static peMBFrameReceive peMBFrameReceiveCur</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00078">mb.c:78</a></div></div>
<div class="ttc" id="amb_8c_html_ae9daf4765e9a354a64f171108ace3094"><div class="ttname"><a href="mb_8c.html#ae9daf4765e9a354a64f171108ace3094">peMBFrameSendCur</a></div><div class="ttdeci">static peMBFrameSend peMBFrameSendCur</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00075">mb.c:75</a></div></div>
<div class="ttc" id="ambport_8h_html_a23aa6afd41597f7aaf5d1a6e6831c718"><div class="ttname"><a href="mbport_8h.html#a23aa6afd41597f7aaf5d1a6e6831c718">xMBPortEventInit</a></div><div class="ttdeci">BOOL xMBPortEventInit(void)</div></div>
<div class="ttc" id="ambport_8h_html_ae97991ffb6ce01584afce5dd4f653b41"><div class="ttname"><a href="mbport_8h.html#ae97991ffb6ce01584afce5dd4f653b41">vMBPortClose</a></div><div class="ttdeci">void vMBPortClose(void)</div></div>
<div class="ttc" id="ambproto_8h_html_a5e80f256fa3cb8a969c9935b48f2a7b1"><div class="ttname"><a href="mbproto_8h.html#a5e80f256fa3cb8a969c9935b48f2a7b1">MB_ADDRESS_BROADCAST</a></div><div class="ttdeci">#define MB_ADDRESS_BROADCAST</div><div class="ttdef"><b>Definition</b> <a href="mbproto_8h_source.html#l00038">mbproto.h:38</a></div></div>
<div class="ttc" id="ambproto_8h_html_a8b915be3e09043b5da9d307d30efd9f7"><div class="ttname"><a href="mbproto_8h.html#a8b915be3e09043b5da9d307d30efd9f7">MB_ADDRESS_MAX</a></div><div class="ttdeci">#define MB_ADDRESS_MAX</div><div class="ttdef"><b>Definition</b> <a href="mbproto_8h_source.html#l00040">mbproto.h:40</a></div></div>
<div class="ttc" id="ambproto_8h_html_accf024291f4458ad8ad33e32568e8561"><div class="ttname"><a href="mbproto_8h.html#accf024291f4458ad8ad33e32568e8561">MB_ADDRESS_MIN</a></div><div class="ttdeci">#define MB_ADDRESS_MIN</div><div class="ttdef"><b>Definition</b> <a href="mbproto_8h_source.html#l00039">mbproto.h:39</a></div></div>
<div class="ttc" id="ambrtu_8c_html_a3d44ef4747b7202d37142ef1aaea493b"><div class="ttname"><a href="mbrtu_8c.html#a3d44ef4747b7202d37142ef1aaea493b">eMBRTUStop</a></div><div class="ttdeci">void eMBRTUStop(void)</div><div class="ttdef"><b>Definition</b> <a href="mbrtu_8c_source.html#l00142">mbrtu.c:142</a></div></div>
<div class="ttc" id="ambrtu_8c_html_a447f45f582daab2600cad612b00120b0"><div class="ttname"><a href="mbrtu_8c.html#a447f45f582daab2600cad612b00120b0">xMBRTUReceiveFSM</a></div><div class="ttdeci">BOOL xMBRTUReceiveFSM(void)</div><div class="ttdef"><b>Definition</b> <a href="mbrtu_8c_source.html#l00226">mbrtu.c:226</a></div></div>
<div class="ttc" id="ambrtu_8c_html_a52738b46d7f3be581582d30cfb2bfcb8"><div class="ttname"><a href="mbrtu_8c.html#a52738b46d7f3be581582d30cfb2bfcb8">eMBRTUInit</a></div><div class="ttdeci">eMBErrorCode eMBRTUInit(UCHAR ucSlaveAddress, UCHAR ucPort, ULONG ulBaudRate, eMBParity eParity)</div><div class="ttdef"><b>Definition</b> <a href="mbrtu_8c_source.html#l00081">mbrtu.c:81</a></div></div>
<div class="ttc" id="ambrtu_8c_html_a663e5daf0be0f2426a72c531c91d423f"><div class="ttname"><a href="mbrtu_8c.html#a663e5daf0be0f2426a72c531c91d423f">xMBRTUTransmitFSM</a></div><div class="ttdeci">BOOL xMBRTUTransmitFSM(void)</div><div class="ttdef"><b>Definition</b> <a href="mbrtu_8c_source.html#l00286">mbrtu.c:286</a></div></div>
<div class="ttc" id="ambrtu_8c_html_a669fd79aadbd1cc49ac4f11382dc15d9"><div class="ttname"><a href="mbrtu_8c.html#a669fd79aadbd1cc49ac4f11382dc15d9">eMBRTUReceive</a></div><div class="ttdeci">eMBErrorCode eMBRTUReceive(UCHAR *pucRcvAddress, UCHAR **pucFrame, USHORT *pusLength)</div><div class="ttdef"><b>Definition</b> <a href="mbrtu_8c_source.html#l00151">mbrtu.c:151</a></div></div>
<div class="ttc" id="ambrtu_8c_html_a6feb0c70f52d3ef74da1cfbdc10d1ab0"><div class="ttname"><a href="mbrtu_8c.html#a6feb0c70f52d3ef74da1cfbdc10d1ab0">eMBRTUSend</a></div><div class="ttdeci">eMBErrorCode eMBRTUSend(UCHAR ucSlaveAddress, const UCHAR *pucFrame, USHORT usLength)</div><div class="ttdef"><b>Definition</b> <a href="mbrtu_8c_source.html#l00187">mbrtu.c:187</a></div></div>
<div class="ttc" id="ambrtu_8c_html_ac6302a8b67c6b82ae49e6c9d6a9795da"><div class="ttname"><a href="mbrtu_8c.html#ac6302a8b67c6b82ae49e6c9d6a9795da">xMBRTUTimerT35Expired</a></div><div class="ttdeci">BOOL xMBRTUTimerT35Expired(void)</div><div class="ttdef"><b>Definition</b> <a href="mbrtu_8c_source.html#l00324">mbrtu.c:324</a></div></div>
<div class="ttc" id="ambrtu_8c_html_ae342bae030ea291a6e8a2fe3d2d0abeb"><div class="ttname"><a href="mbrtu_8c.html#ae342bae030ea291a6e8a2fe3d2d0abeb">eMBRTUStart</a></div><div class="ttdeci">void eMBRTUStart(void)</div><div class="ttdef"><b>Definition</b> <a href="mbrtu_8c_source.html#l00126">mbrtu.c:126</a></div></div>
</div><!-- fragment --><div class="dynheader">
Граф вызовов:</div>
<div class="dyncontent">
<div class="center"><img src="group__modbus_ga622dbe6b38ff1d255523d4736fa3da26_cgraph.png" border="0" usemap="#agroup__modbus_ga622dbe6b38ff1d255523d4736fa3da26_cgraph" alt=""/></div>
<map name="agroup__modbus_ga622dbe6b38ff1d255523d4736fa3da26_cgraph" id="agroup__modbus_ga622dbe6b38ff1d255523d4736fa3da26_cgraph">
<area shape="rect" title="Initialize the Modbus protocol stack." alt="" coords="5,284,71,311"/>
<area shape="rect" href="mbrtu_8c.html#a52738b46d7f3be581582d30cfb2bfcb8" title=" " alt="" coords="159,56,249,83"/>
<area shape="poly" title=" " alt="" coords="38,283,44,246,57,195,80,140,97,115,117,93,142,77,145,82,120,97,101,118,85,143,62,196,49,247,43,284"/>
<area shape="rect" href="mbrtu_8c.html#a669fd79aadbd1cc49ac4f11382dc15d9" title=" " alt="" coords="145,157,263,184"/>
<area shape="poly" title=" " alt="" coords="44,282,72,239,93,215,117,194,129,187,131,192,120,198,97,218,76,242,49,285"/>
<area shape="rect" href="mbrtu_8c.html#a6feb0c70f52d3ef74da1cfbdc10d1ab0" title=" " alt="" coords="152,259,256,285"/>
<area shape="poly" title=" " alt="" coords="71,290,137,279,138,285,72,295"/>
<area shape="rect" href="mbrtu_8c.html#ae342bae030ea291a6e8a2fe3d2d0abeb" title=" " alt="" coords="153,208,255,235"/>
<area shape="poly" title=" " alt="" coords="56,282,84,263,118,244,138,236,140,241,120,249,87,267,59,286"/>
<area shape="rect" href="mbrtu_8c.html#a3d44ef4747b7202d37142ef1aaea493b" title=" " alt="" coords="154,309,254,336"/>
<area shape="poly" title=" " alt="" coords="72,300,139,310,138,315,71,305"/>
<area shape="rect" href="mbport_8h.html#ae97991ffb6ce01584afce5dd4f653b41" title=" " alt="" coords="152,461,256,488"/>
<area shape="poly" title=" " alt="" coords="45,310,54,339,69,376,91,414,120,447,139,459,136,463,117,451,86,418,64,378,49,341,40,312"/>
<area shape="rect" href="mbport_8h.html#a23aa6afd41597f7aaf5d1a6e6831c718" title=" " alt="" coords="143,512,265,539"/>
<area shape="poly" title=" " alt="" coords="43,311,49,348,62,398,85,452,101,477,120,498,131,506,128,510,117,502,97,480,80,454,57,400,44,349,38,311"/>
<area shape="rect" href="mbrtu_8c.html#a447f45f582daab2600cad612b00120b0" title=" " alt="" coords="131,107,277,133"/>
<area shape="poly" title=" " alt="" coords="40,283,49,254,64,216,86,177,117,143,122,139,126,143,120,147,91,180,69,219,54,256,45,284"/>
<area shape="rect" href="mbrtu_8c.html#ac6302a8b67c6b82ae49e6c9d6a9795da" title=" " alt="" coords="119,411,289,437"/>
<area shape="poly" title=" " alt="" coords="49,310,76,353,97,376,120,397,128,401,125,406,117,401,93,380,72,356,44,312"/>
<area shape="rect" href="mbrtu_8c.html#a663e5daf0be0f2426a72c531c91d423f" title=" " alt="" coords="128,360,280,387"/>
<area shape="poly" title=" " alt="" coords="59,309,87,328,120,346,135,352,133,357,118,350,84,332,56,313"/>
<area shape="rect" href="mbport_8h.html#af614e62c57eaba86f45c45e5d0e6cfd9" title=" " alt="" coords="353,56,475,83"/>
<area shape="poly" title=" " alt="" coords="250,67,337,67,337,72,250,72"/>
<area shape="rect" href="mbport_8h.html#a93d8e78fe43e66fab707da6eda4f5eaf" title=" " alt="" coords="350,5,478,32"/>
<area shape="poly" title=" " alt="" coords="249,56,340,34,341,39,250,61"/>
<area shape="rect" href="mbcrc_8c.html#abc48f359fd99e303016c8b74cc82c3ff" title=" " alt="" coords="366,208,462,235"/>
<area shape="poly" title=" " alt="" coords="263,182,351,204,350,209,262,187"/>
<area shape="poly" title=" " alt="" coords="255,257,350,234,351,239,256,262"/>
<area shape="rect" href="mbport_8h.html#a4bf68bda6b5ed6c341d27d439a6c03df" title=" " alt="" coords="342,259,485,285"/>
<area shape="poly" title=" " alt="" coords="256,269,326,269,326,275,256,275"/>
<area shape="poly" title=" " alt="" coords="255,231,341,252,340,257,254,236"/>
<area shape="rect" href="mbport_8h.html#a2356d0d397b3da961b86cabddb9a9760" title=" " alt="" coords="339,157,488,184"/>
<area shape="poly" title=" " alt="" coords="254,207,340,186,341,191,255,212"/>
<area shape="poly" title=" " alt="" coords="254,308,340,287,341,292,255,313"/>
<area shape="rect" href="mbport_8h.html#adf96b9d106626e42fa0b7b1a0b802523" title=" " alt="" coords="338,309,490,336"/>
<area shape="poly" title=" " alt="" coords="254,320,322,320,322,325,254,325"/>
<area shape="poly" title=" " alt="" coords="263,131,341,151,340,156,262,137"/>
<area shape="rect" href="mbport_8h.html#a4a4724e9dc26b2d2d1cc2a6d41c24770" title=" " alt="" coords="337,107,490,133"/>
<area shape="poly" title=" " alt="" coords="278,117,321,117,321,123,278,123"/>
<area shape="poly" title=" " alt="" coords="264,408,288,396,302,384,311,372,320,359,335,346,345,341,347,345,339,350,324,362,315,375,306,388,290,401,266,413"/>
<area shape="rect" href="mbport_8h.html#a2cdfe42cd5ee37d5839081c636576e7c" title=" " alt="" coords="348,411,479,437"/>
<area shape="poly" title=" " alt="" coords="289,421,333,421,333,427,289,427"/>
<area shape="poly" title=" " alt="" coords="264,357,288,346,302,334,311,321,320,308,335,295,345,290,347,295,339,300,324,312,315,324,306,337,290,350,266,362"/>
<area shape="poly" title=" " alt="" coords="263,385,341,404,340,409,262,390"/>
<area shape="rect" href="mbport_8h.html#a5ca95563c25eb239a4c51f3ce35f5cc8" title=" " alt="" coords="338,360,490,387"/>
<area shape="poly" title=" " alt="" coords="280,371,322,371,322,376,280,376"/>
</map>
</div>

</div>
</div>
<a id="ga12648c98d45f768ba878fbcee46caca5" name="ga12648c98d45f768ba878fbcee46caca5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga12648c98d45f768ba878fbcee46caca5">&#9670;&#160;</a></span>eMBPoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a> eMBPoll </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main pooling loop of the Modbus protocol stack. </p>
<p>This function must be called periodically. The timer interval required is given by the application dependent Modbus slave timeout. Internally the function calls <a class="el" href="mbport_8h.html#ad61d350e63d0c41e7563ac0bc0fd346f">xMBPortEventGet()</a> and waits for an event from the receiver or transmitter state machines.</p>
<dl class="section return"><dt>Возвращает</dt><dd>If the protocol stack is not in the enabled state the function returns eMBErrorCode::MB_EILLSTATE. Otherwise it returns eMBErrorCode::MB_ENOERR. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="mb_8c_source.html">mb.c</a> строка <a class="el" href="mb_8c_source.html#l00332">332</a></p>
<div class="fragment"><div class="line"><span class="lineno">  333</span>{</div>
<div class="line"><span class="lineno">  334</span>    <span class="keyword">static</span> UCHAR   *ucMBFrame;</div>
<div class="line"><span class="lineno">  335</span>    <span class="keyword">static</span> UCHAR    ucRcvAddress;</div>
<div class="line"><span class="lineno">  336</span>    <span class="keyword">static</span> UCHAR    ucFunctionCode;</div>
<div class="line"><span class="lineno">  337</span>    <span class="keyword">static</span> USHORT   usLength;</div>
<div class="line"><span class="lineno">  338</span>    <span class="keyword">static</span> <a class="code hl_enumeration" href="mbproto_8h.html#ae054c61e74d0e5bd54f7aa2bda497c9c">eMBException</a> eException;</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordtype">int</span>             i;</div>
<div class="line"><span class="lineno">  341</span>    <a class="code hl_enumeration" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>    eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>;</div>
<div class="line"><span class="lineno">  342</span>    <a class="code hl_enumeration" href="mbport_8h.html#a208845596909620aa0062468ff11ef02">eMBEventType</a>    eEvent;</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>    <span class="comment">/* Check if the protocol stack is ready. */</span></div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="mb_8c.html#a1ccc6954ab86e45b13f3c0536fd66315">eMBState</a> != <a class="code hl_enumvalue" href="mb_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba94a5ceac60e29b414570d8fec5d459ca">STATE_ENABLED</a> )</div>
<div class="line"><span class="lineno">  346</span>    {</div>
<div class="line"><span class="lineno">  347</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0e64a209ac1a01935167c6986338a6f">MB_EILLSTATE</a>;</div>
<div class="line"><span class="lineno">  348</span>    }</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>    <span class="comment">/* Check if there is a event available. If not return control to caller.</span></div>
<div class="line"><span class="lineno">  351</span><span class="comment">     * Otherwise we will handle the event. */</span></div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="mbport_8h.html#ad61d350e63d0c41e7563ac0bc0fd346f">xMBPortEventGet</a>( &amp;eEvent ) == TRUE )</div>
<div class="line"><span class="lineno">  353</span>    {</div>
<div class="line"><span class="lineno">  354</span>        <span class="keywordflow">switch</span> ( eEvent )</div>
<div class="line"><span class="lineno">  355</span>        {</div>
<div class="line"><span class="lineno">  356</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="mbport_8h.html#a208845596909620aa0062468ff11ef02a193382528431aaa562c2ecfee29039c0">EV_READY</a>:</div>
<div class="line"><span class="lineno">  357</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="mbport_8h.html#a208845596909620aa0062468ff11ef02a5925cb291b7b7a4ec1fdee32aca761a2">EV_FRAME_RECEIVED</a>:</div>
<div class="line"><span class="lineno">  360</span>            eStatus = <a class="code hl_variable" href="mb_8c.html#a9e7657161e4e14b266f0f20d3ad8eda5">peMBFrameReceiveCur</a>( &amp;ucRcvAddress, &amp;ucMBFrame, &amp;usLength );</div>
<div class="line"><span class="lineno">  361</span>            <span class="keywordflow">if</span>( eStatus == <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a> )</div>
<div class="line"><span class="lineno">  362</span>            {</div>
<div class="line"><span class="lineno">  363</span>                <span class="comment">/* Check if the frame is for us. If not ignore the frame. */</span></div>
<div class="line"><span class="lineno">  364</span>                <span class="keywordflow">if</span>( ( ucRcvAddress == <a class="code hl_variable" href="mb_8c.html#a49d81a2027be5b1914a9aca31bb1a9ae">ucMBAddress</a> ) || ( ucRcvAddress == <a class="code hl_define" href="mbproto_8h.html#a5e80f256fa3cb8a969c9935b48f2a7b1">MB_ADDRESS_BROADCAST</a> ) )</div>
<div class="line"><span class="lineno">  365</span>                {</div>
<div class="line"><span class="lineno">  366</span>                    ( void )<a class="code hl_function" href="mbport_8h.html#a2cdfe42cd5ee37d5839081c636576e7c">xMBPortEventPost</a>( <a class="code hl_enumvalue" href="mbport_8h.html#a208845596909620aa0062468ff11ef02ab8e9ebe43ab8ce27e6e48c46f57d9019">EV_EXECUTE</a> );</div>
<div class="line"><span class="lineno">  367</span>                }</div>
<div class="line"><span class="lineno">  368</span>            }</div>
<div class="line"><span class="lineno">  369</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="mbport_8h.html#a208845596909620aa0062468ff11ef02ab8e9ebe43ab8ce27e6e48c46f57d9019">EV_EXECUTE</a>:</div>
<div class="line"><span class="lineno">  372</span>            ucFunctionCode = ucMBFrame[<a class="code hl_define" href="mbframe_8h.html#a554b629520c4266fdff39099a2eef5db">MB_PDU_FUNC_OFF</a>];</div>
<div class="line"><span class="lineno">  373</span>            eException = <a class="code hl_enumvalue" href="mbproto_8h.html#ae054c61e74d0e5bd54f7aa2bda497c9caf2cf9a6b48c5dee86cd361cc327b9abb">MB_EX_ILLEGAL_FUNCTION</a>;</div>
<div class="line"><span class="lineno">  374</span>            <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code hl_define" href="group__modbus__cfg.html#ga1dd115d6338ef87c83aaa23809792f25">MB_FUNC_HANDLERS_MAX</a>; i++ )</div>
<div class="line"><span class="lineno">  375</span>            {</div>
<div class="line"><span class="lineno">  376</span>                <span class="comment">/* No more function handlers registered. Abort. */</span></div>
<div class="line"><span class="lineno">  377</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].ucFunctionCode == 0 )</div>
<div class="line"><span class="lineno">  378</span>                {</div>
<div class="line"><span class="lineno">  379</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  380</span>                }</div>
<div class="line"><span class="lineno">  381</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].ucFunctionCode == ucFunctionCode )</div>
<div class="line"><span class="lineno">  382</span>                {</div>
<div class="line"><span class="lineno">  383</span>                    eException = <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].<a class="code hl_variable" href="structx_m_b_function_handler.html#ab2ea74b69155c337ec9c0d2e229160ce">pxHandler</a>( ucMBFrame, &amp;usLength );</div>
<div class="line"><span class="lineno">  384</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  385</span>                }</div>
<div class="line"><span class="lineno">  386</span>            }</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>            <span class="comment">/* If the request was not sent to the broadcast address we</span></div>
<div class="line"><span class="lineno">  389</span><span class="comment">             * return a reply. */</span></div>
<div class="line"><span class="lineno">  390</span>            <span class="keywordflow">if</span>( ucRcvAddress != <a class="code hl_define" href="mbproto_8h.html#a5e80f256fa3cb8a969c9935b48f2a7b1">MB_ADDRESS_BROADCAST</a> )</div>
<div class="line"><span class="lineno">  391</span>            {</div>
<div class="line"><span class="lineno">  392</span>                <span class="keywordflow">if</span>( eException != <a class="code hl_enumvalue" href="mbproto_8h.html#ae054c61e74d0e5bd54f7aa2bda497c9cab784d14e9328dd8bdcacb5a0e6eb7808">MB_EX_NONE</a> )</div>
<div class="line"><span class="lineno">  393</span>                {</div>
<div class="line"><span class="lineno">  394</span>                    <span class="comment">/* An exception occured. Build an error frame. */</span></div>
<div class="line"><span class="lineno">  395</span>                    usLength = 0;</div>
<div class="line"><span class="lineno">  396</span>                    ucMBFrame[usLength++] = ( UCHAR )( ucFunctionCode | <a class="code hl_define" href="mbproto_8h.html#ad45e73770d806dfd75cc45b2d1d31dc2">MB_FUNC_ERROR</a> );</div>
<div class="line"><span class="lineno">  397</span>                    ucMBFrame[usLength++] = eException;</div>
<div class="line"><span class="lineno">  398</span>                }</div>
<div class="line"><span class="lineno">  399</span>                <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="mb_8c.html#a288653bd38728bea3b3c705f25d87483">eMBCurrentMode</a> == <a class="code hl_enumvalue" href="#gga462d0d9396f02be6f9fd5b6f19463e61afa37751530d5e48cb5a3f8841f9e3143">MB_ASCII</a> ) &amp;&amp; <a class="code hl_define" href="group__modbus__cfg.html#ga22fd01f62670a71ab137e16118c37ca2">MB_ASCII_TIMEOUT_WAIT_BEFORE_SEND_MS</a> )</div>
<div class="line"><span class="lineno">  400</span>                {</div>
<div class="line"><span class="lineno">  401</span>                    <a class="code hl_function" href="mbport_8h.html#a334f66a0527a862f58488cc40d7999d4">vMBPortTimersDelay</a>( <a class="code hl_define" href="group__modbus__cfg.html#ga22fd01f62670a71ab137e16118c37ca2">MB_ASCII_TIMEOUT_WAIT_BEFORE_SEND_MS</a> );</div>
<div class="line"><span class="lineno">  402</span>                }                </div>
<div class="line"><span class="lineno">  403</span>                eStatus = <a class="code hl_variable" href="mb_8c.html#ae9daf4765e9a354a64f171108ace3094">peMBFrameSendCur</a>( <a class="code hl_variable" href="mb_8c.html#a49d81a2027be5b1914a9aca31bb1a9ae">ucMBAddress</a>, ucMBFrame, usLength );</div>
<div class="line"><span class="lineno">  404</span>            }</div>
<div class="line"><span class="lineno">  405</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="mbport_8h.html#a208845596909620aa0062468ff11ef02afa87727a0c06c8ab5e2b5e6ae59cac95">EV_FRAME_SENT</a>:</div>
<div class="line"><span class="lineno">  408</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  409</span>        }</div>
<div class="line"><span class="lineno">  410</span>    }</div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>;</div>
<div class="line"><span class="lineno">  412</span>}</div>
<div class="ttc" id="agroup__modbus__cfg_html_ga1dd115d6338ef87c83aaa23809792f25"><div class="ttname"><a href="group__modbus__cfg.html#ga1dd115d6338ef87c83aaa23809792f25">MB_FUNC_HANDLERS_MAX</a></div><div class="ttdeci">#define MB_FUNC_HANDLERS_MAX</div><div class="ttdoc">Maximum number of Modbus functions codes the protocol stack should support.</div><div class="ttdef"><b>Definition</b> <a href="mbconfig_8h_source.html#l00086">mbconfig.h:86</a></div></div>
<div class="ttc" id="agroup__modbus__cfg_html_ga22fd01f62670a71ab137e16118c37ca2"><div class="ttname"><a href="group__modbus__cfg.html#ga22fd01f62670a71ab137e16118c37ca2">MB_ASCII_TIMEOUT_WAIT_BEFORE_SEND_MS</a></div><div class="ttdeci">#define MB_ASCII_TIMEOUT_WAIT_BEFORE_SEND_MS</div><div class="ttdoc">Timeout to wait in ASCII prior to enabling transmitter.</div><div class="ttdef"><b>Definition</b> <a href="mbconfig_8h_source.html#l00076">mbconfig.h:76</a></div></div>
<div class="ttc" id="amb_8c_html_af7285b4571ef7138b23ddc3b2d079539"><div class="ttname"><a href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a></div><div class="ttdeci">static xMBFunctionHandler xFuncHandlers[MB_FUNC_HANDLERS_MAX]</div><div class="ttdef"><b>Definition</b> <a href="mb_8c_source.html#l00095">mb.c:95</a></div></div>
<div class="ttc" id="ambframe_8h_html_a554b629520c4266fdff39099a2eef5db"><div class="ttname"><a href="mbframe_8h.html#a554b629520c4266fdff39099a2eef5db">MB_PDU_FUNC_OFF</a></div><div class="ttdeci">#define MB_PDU_FUNC_OFF</div><div class="ttdef"><b>Definition</b> <a href="mbframe_8h_source.html#l00066">mbframe.h:66</a></div></div>
<div class="ttc" id="ambport_8h_html_a208845596909620aa0062468ff11ef02"><div class="ttname"><a href="mbport_8h.html#a208845596909620aa0062468ff11ef02">eMBEventType</a></div><div class="ttdeci">eMBEventType</div><div class="ttdef"><b>Definition</b> <a href="mbport_8h_source.html#l00040">mbport.h:41</a></div></div>
<div class="ttc" id="ambport_8h_html_a208845596909620aa0062468ff11ef02a193382528431aaa562c2ecfee29039c0"><div class="ttname"><a href="mbport_8h.html#a208845596909620aa0062468ff11ef02a193382528431aaa562c2ecfee29039c0">EV_READY</a></div><div class="ttdeci">@ EV_READY</div><div class="ttdef"><b>Definition</b> <a href="mbport_8h_source.html#l00042">mbport.h:42</a></div></div>
<div class="ttc" id="ambport_8h_html_a208845596909620aa0062468ff11ef02a5925cb291b7b7a4ec1fdee32aca761a2"><div class="ttname"><a href="mbport_8h.html#a208845596909620aa0062468ff11ef02a5925cb291b7b7a4ec1fdee32aca761a2">EV_FRAME_RECEIVED</a></div><div class="ttdeci">@ EV_FRAME_RECEIVED</div><div class="ttdef"><b>Definition</b> <a href="mbport_8h_source.html#l00043">mbport.h:43</a></div></div>
<div class="ttc" id="ambport_8h_html_a208845596909620aa0062468ff11ef02ab8e9ebe43ab8ce27e6e48c46f57d9019"><div class="ttname"><a href="mbport_8h.html#a208845596909620aa0062468ff11ef02ab8e9ebe43ab8ce27e6e48c46f57d9019">EV_EXECUTE</a></div><div class="ttdeci">@ EV_EXECUTE</div><div class="ttdef"><b>Definition</b> <a href="mbport_8h_source.html#l00044">mbport.h:44</a></div></div>
<div class="ttc" id="ambport_8h_html_a208845596909620aa0062468ff11ef02afa87727a0c06c8ab5e2b5e6ae59cac95"><div class="ttname"><a href="mbport_8h.html#a208845596909620aa0062468ff11ef02afa87727a0c06c8ab5e2b5e6ae59cac95">EV_FRAME_SENT</a></div><div class="ttdeci">@ EV_FRAME_SENT</div><div class="ttdef"><b>Definition</b> <a href="mbport_8h_source.html#l00046">mbport.h:45</a></div></div>
<div class="ttc" id="ambport_8h_html_a2cdfe42cd5ee37d5839081c636576e7c"><div class="ttname"><a href="mbport_8h.html#a2cdfe42cd5ee37d5839081c636576e7c">xMBPortEventPost</a></div><div class="ttdeci">BOOL xMBPortEventPost(eMBEventType eEvent)</div></div>
<div class="ttc" id="ambport_8h_html_a334f66a0527a862f58488cc40d7999d4"><div class="ttname"><a href="mbport_8h.html#a334f66a0527a862f58488cc40d7999d4">vMBPortTimersDelay</a></div><div class="ttdeci">void vMBPortTimersDelay(USHORT usTimeOutMS)</div></div>
<div class="ttc" id="ambport_8h_html_ad61d350e63d0c41e7563ac0bc0fd346f"><div class="ttname"><a href="mbport_8h.html#ad61d350e63d0c41e7563ac0bc0fd346f">xMBPortEventGet</a></div><div class="ttdeci">BOOL xMBPortEventGet(eMBEventType *eEvent)</div></div>
<div class="ttc" id="ambproto_8h_html_ad45e73770d806dfd75cc45b2d1d31dc2"><div class="ttname"><a href="mbproto_8h.html#ad45e73770d806dfd75cc45b2d1d31dc2">MB_FUNC_ERROR</a></div><div class="ttdeci">#define MB_FUNC_ERROR</div><div class="ttdef"><b>Definition</b> <a href="mbproto_8h_source.html#l00056">mbproto.h:56</a></div></div>
<div class="ttc" id="ambproto_8h_html_ae054c61e74d0e5bd54f7aa2bda497c9c"><div class="ttname"><a href="mbproto_8h.html#ae054c61e74d0e5bd54f7aa2bda497c9c">eMBException</a></div><div class="ttdeci">eMBException</div><div class="ttdef"><b>Definition</b> <a href="mbproto_8h_source.html#l00058">mbproto.h:59</a></div></div>
<div class="ttc" id="ambproto_8h_html_ae054c61e74d0e5bd54f7aa2bda497c9cab784d14e9328dd8bdcacb5a0e6eb7808"><div class="ttname"><a href="mbproto_8h.html#ae054c61e74d0e5bd54f7aa2bda497c9cab784d14e9328dd8bdcacb5a0e6eb7808">MB_EX_NONE</a></div><div class="ttdeci">@ MB_EX_NONE</div><div class="ttdef"><b>Definition</b> <a href="mbproto_8h_source.html#l00060">mbproto.h:60</a></div></div>
<div class="ttc" id="ambproto_8h_html_ae054c61e74d0e5bd54f7aa2bda497c9caf2cf9a6b48c5dee86cd361cc327b9abb"><div class="ttname"><a href="mbproto_8h.html#ae054c61e74d0e5bd54f7aa2bda497c9caf2cf9a6b48c5dee86cd361cc327b9abb">MB_EX_ILLEGAL_FUNCTION</a></div><div class="ttdeci">@ MB_EX_ILLEGAL_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="mbproto_8h_source.html#l00061">mbproto.h:61</a></div></div>
<div class="ttc" id="astructx_m_b_function_handler_html_ab2ea74b69155c337ec9c0d2e229160ce"><div class="ttname"><a href="structx_m_b_function_handler.html#ab2ea74b69155c337ec9c0d2e229160ce">xMBFunctionHandler::pxHandler</a></div><div class="ttdeci">pxMBFunctionHandler pxHandler</div><div class="ttdef"><b>Definition</b> <a href="mbproto_8h_source.html#l00077">mbproto.h:77</a></div></div>
</div><!-- fragment --><div class="dynheader">
Граф вызовов:</div>
<div class="dyncontent">
<div class="center"><img src="group__modbus_ga12648c98d45f768ba878fbcee46caca5_cgraph.png" border="0" usemap="#agroup__modbus_ga12648c98d45f768ba878fbcee46caca5_cgraph" alt=""/></div>
<map name="agroup__modbus_ga12648c98d45f768ba878fbcee46caca5_cgraph" id="agroup__modbus_ga12648c98d45f768ba878fbcee46caca5_cgraph">
<area shape="rect" title="The main pooling loop of the Modbus protocol stack." alt="" coords="5,56,76,83"/>
<area shape="rect" href="mbport_8h.html#a334f66a0527a862f58488cc40d7999d4" title=" " alt="" coords="124,5,266,32"/>
<area shape="poly" title=" " alt="" coords="75,55,136,35,138,40,77,60"/>
<area shape="rect" href="mbport_8h.html#ad61d350e63d0c41e7563ac0bc0fd346f" title=" " alt="" coords="132,56,258,83"/>
<area shape="poly" title=" " alt="" coords="76,67,117,67,117,72,76,72"/>
<area shape="rect" href="mbport_8h.html#a2cdfe42cd5ee37d5839081c636576e7c" title=" " alt="" coords="129,107,261,133"/>
<area shape="poly" title=" " alt="" coords="77,78,138,99,136,104,75,83"/>
</map>
</div>

</div>
</div>
<a id="ga5f6e66893b2388a602ac453253a00784" name="ga5f6e66893b2388a602ac453253a00784"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f6e66893b2388a602ac453253a00784">&#9670;&#160;</a></span>eMBRegisterCB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a> eMBRegisterCB </td>
          <td>(</td>
          <td class="paramtype">UCHAR</td>          <td class="paramname"><span class="paramname"><em>ucFunctionCode</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mbproto_8h.html#a9fe16efc84b141d9b9ec804c0ddfa4b1">pxMBFunctionHandler</a></td>          <td class="paramname"><span class="paramname"><em>pxHandler</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a callback handler for a given function code. </p>
<p>This function registers a new callback handler for a given function code. The callback handler supplied is responsible for interpreting the Modbus PDU and the creation of an appropriate response. In case of an error it should return one of the possible Modbus exceptions which results in a Modbus exception frame sent by the protocol stack.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">ucFunctionCode</td><td>The Modbus function code for which this handler should be registers. Valid function codes are in the range 1 to 127. </td></tr>
    <tr><td class="paramname">pxHandler</td><td>The function handler which should be called in case such a frame is received. If <code>NULL</code> a previously registered function handler for this function code is removed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>eMBErrorCode::MB_ENOERR if the handler has been installed. If no more resources are available it returns eMBErrorCode::MB_ENORES. In this case the values in <a class="el" href="mbconfig_8h.html">mbconfig.h</a> should be adjusted. If the argument was not valid it returns eMBErrorCode::MB_EINVAL. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="mb_8c_source.html">mb.c</a> строка <a class="el" href="mb_8c_source.html#l00226">226</a></p>
<div class="fragment"><div class="line"><span class="lineno">  227</span>{</div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordtype">int</span>             i;</div>
<div class="line"><span class="lineno">  229</span>    <a class="code hl_enumeration" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a>    eStatus;</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <span class="keywordflow">if</span>( ( 0 &lt; ucFunctionCode ) &amp;&amp; ( ucFunctionCode &lt;= 127 ) )</div>
<div class="line"><span class="lineno">  232</span>    {</div>
<div class="line"><span class="lineno">  233</span>        ENTER_CRITICAL_SECTION(  );</div>
<div class="line"><span class="lineno">  234</span>        <span class="keywordflow">if</span>( pxHandler != NULL )</div>
<div class="line"><span class="lineno">  235</span>        {</div>
<div class="line"><span class="lineno">  236</span>            <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code hl_define" href="group__modbus__cfg.html#ga1dd115d6338ef87c83aaa23809792f25">MB_FUNC_HANDLERS_MAX</a>; i++ )</div>
<div class="line"><span class="lineno">  237</span>            {</div>
<div class="line"><span class="lineno">  238</span>                <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].pxHandler == NULL ) ||</div>
<div class="line"><span class="lineno">  239</span>                    ( <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].pxHandler == pxHandler ) )</div>
<div class="line"><span class="lineno">  240</span>                {</div>
<div class="line"><span class="lineno">  241</span>                    <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].<a class="code hl_variable" href="structx_m_b_function_handler.html#acf0798484cf2b6b1ec21389d3f2a997c">ucFunctionCode</a> = ucFunctionCode;</div>
<div class="line"><span class="lineno">  242</span>                    <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].<a class="code hl_variable" href="structx_m_b_function_handler.html#ab2ea74b69155c337ec9c0d2e229160ce">pxHandler</a> = pxHandler;</div>
<div class="line"><span class="lineno">  243</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  244</span>                }</div>
<div class="line"><span class="lineno">  245</span>            }</div>
<div class="line"><span class="lineno">  246</span>            eStatus = ( i != <a class="code hl_define" href="group__modbus__cfg.html#ga1dd115d6338ef87c83aaa23809792f25">MB_FUNC_HANDLERS_MAX</a> ) ? <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a> : <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823daf0700c1e37bfc75068e6577bc0b04bb8">MB_ENORES</a>;</div>
<div class="line"><span class="lineno">  247</span>        }</div>
<div class="line"><span class="lineno">  248</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  249</span>        {</div>
<div class="line"><span class="lineno">  250</span>            <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code hl_define" href="group__modbus__cfg.html#ga1dd115d6338ef87c83aaa23809792f25">MB_FUNC_HANDLERS_MAX</a>; i++ )</div>
<div class="line"><span class="lineno">  251</span>            {</div>
<div class="line"><span class="lineno">  252</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].ucFunctionCode == ucFunctionCode )</div>
<div class="line"><span class="lineno">  253</span>                {</div>
<div class="line"><span class="lineno">  254</span>                    <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].<a class="code hl_variable" href="structx_m_b_function_handler.html#acf0798484cf2b6b1ec21389d3f2a997c">ucFunctionCode</a> = 0;</div>
<div class="line"><span class="lineno">  255</span>                    <a class="code hl_variable" href="mb_8c.html#af7285b4571ef7138b23ddc3b2d079539">xFuncHandlers</a>[i].<a class="code hl_variable" href="structx_m_b_function_handler.html#ab2ea74b69155c337ec9c0d2e229160ce">pxHandler</a> = NULL;</div>
<div class="line"><span class="lineno">  256</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  257</span>                }</div>
<div class="line"><span class="lineno">  258</span>            }</div>
<div class="line"><span class="lineno">  259</span>            <span class="comment">/* Remove can&#39;t fail. */</span></div>
<div class="line"><span class="lineno">  260</span>            eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>;</div>
<div class="line"><span class="lineno">  261</span>        }</div>
<div class="line"><span class="lineno">  262</span>        EXIT_CRITICAL_SECTION(  );</div>
<div class="line"><span class="lineno">  263</span>    }</div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  265</span>    {</div>
<div class="line"><span class="lineno">  266</span>        eStatus = <a class="code hl_enumvalue" href="#gga9e7fce8c431cb0e521c67f7f36dd823dafa57cdb3f85e8ab4baf160579104d624">MB_EINVAL</a>;</div>
<div class="line"><span class="lineno">  267</span>    }</div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordflow">return</span> eStatus;</div>
<div class="line"><span class="lineno">  269</span>}</div>
<div class="ttc" id="astructx_m_b_function_handler_html_acf0798484cf2b6b1ec21389d3f2a997c"><div class="ttname"><a href="structx_m_b_function_handler.html#acf0798484cf2b6b1ec21389d3f2a997c">xMBFunctionHandler::ucFunctionCode</a></div><div class="ttdeci">UCHAR ucFunctionCode</div><div class="ttdef"><b>Definition</b> <a href="mbproto_8h_source.html#l00076">mbproto.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gabe2b0e2dccf23d506666aa3cfdf6a8a3" name="gabe2b0e2dccf23d506666aa3cfdf6a8a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe2b0e2dccf23d506666aa3cfdf6a8a3">&#9670;&#160;</a></span>eMBSetSlaveID()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a> eMBSetSlaveID </td>
          <td>(</td>
          <td class="paramtype">UCHAR</td>          <td class="paramname"><span class="paramname"><em>ucSlaveID</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL</td>          <td class="paramname"><span class="paramname"><em>xIsRunning</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UCHAR const *</td>          <td class="paramname"><span class="paramname"><em>pucAdditional</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USHORT</td>          <td class="paramname"><span class="paramname"><em>usAdditionalLen</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the slave id of the device. </p>
<p>This function should be called when the Modbus function <em>Report Slave ID</em> is enabled ( By defining MB_FUNC_OTHER_REP_SLAVEID_ENABLED in <a class="el" href="mbconfig_8h.html">mbconfig.h</a> ).</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">ucSlaveID</td><td>Values is returned in the <em>Slave ID</em> byte of the <em>Report Slave ID</em> response. </td></tr>
    <tr><td class="paramname">xIsRunning</td><td>If TRUE the <em>Run Indicator Status</em> byte is set to 0xFF. otherwise the <em>Run Indicator Status</em> is 0x00. </td></tr>
    <tr><td class="paramname">pucAdditional</td><td>Values which should be returned in the <em>Additional</em> bytes of the <em> Report Slave ID</em> response. </td></tr>
    <tr><td class="paramname">usAdditionalLen</td><td>Length of the buffer <code>pucAdditonal</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>If the static buffer defined by MB_FUNC_OTHER_REP_SLAVEID_BUF in <a class="el" href="mbconfig_8h.html">mbconfig.h</a> is to small it returns eMBErrorCode::MB_ENORES. Otherwise it returns eMBErrorCode::MB_ENOERR. </dd></dl>

</div>
</div>
<a id="gab06a2d0ef8bdfd866cd934f0ec7e7a6e" name="gab06a2d0ef8bdfd866cd934f0ec7e7a6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab06a2d0ef8bdfd866cd934f0ec7e7a6e">&#9670;&#160;</a></span>eMBTCPInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ga9e7fce8c431cb0e521c67f7f36dd823d">eMBErrorCode</a> eMBTCPInit </td>
          <td>(</td>
          <td class="paramtype">USHORT</td>          <td class="paramname"><span class="paramname"><em>usTCPPort</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the Modbus protocol stack for Modbus TCP. </p>
<p>This function initializes the Modbus TCP Module. Please note that frame processing is still disabled until <a class="el" href="#gab697be370833d562e6b016626d996132" title="Enable the Modbus protocol stack.">eMBEnable( )</a> is called.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">usTCPPort</td><td>The TCP port to listen on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>If the protocol stack has been initialized correctly the function returns eMBErrorCode::MB_ENOERR. Otherwise one of the following error codes is returned:<ul>
<li>eMBErrorCode::MB_EINVAL If the slave address was not valid. Valid slave addresses are in the range 1 - 247.</li>
<li>eMBErrorCode::MB_EPORTERR IF the porting layer returned an error. </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Создано системой&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
